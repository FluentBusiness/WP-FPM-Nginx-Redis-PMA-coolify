# üöÄ High-Performance WordPress Docker Stack (Coolify Ready)

> ‚ö†Ô∏è **–í–ê–ñ–ù–û –î–õ–Ø PRODUCTION (–ë–û–ï–í–û–ì–û –†–ï–ñ–ò–ú–ê)**
>
> –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö **–Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (—Å–¥–µ–ª–∞—Ç—å Fork)** —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ —Å–≤–æ–π –ª–∏—á–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç GitHub.
>
> –ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Coolify (## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Coolify) —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–º–µ–Ω–Ω–æ –Ω–∞ **–í–ê–®–£ –∫–æ–ø–∏—é** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://github.com/–í–ê–®_–ù–ò–ö–ù–ï–ô–ú/WP-FPM-Nginx-Redis-PMA-coolify). –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞–º –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–µ—Ä—Å–∏—è–º–∏ –∏ –∑–∞—â–∏—Ç–∏—Ç –æ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–µ.

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ WordPress —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose. –°–±–æ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º **Coolify**, –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è Nginx FastCGI Cache, Redis Object Cache, PHP 8.5 —Å JIT –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–ª–∞–≥–∏–Ω–æ–≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã Fluent/Elementor.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ç–µ–∫–∞

* **App Server:** WordPress –Ω–∞ –±–∞–∑–µ PHP 8.5-FPM (Custom Build).
    * –í–∫–ª—é—á–µ–Ω **JIT** (Just In Time Compiler) –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π **Opcache**.
    * –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: `pdo_mysql`, `zip`, `redis`.
    * –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π **WP-CLI** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

* **Web Server & Caching:** Nginx (Latest).
    * –ù–∞—Å—Ç—Ä–æ–µ–Ω **FastCGI Cache** (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞).
    * –£–º–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Nginx Helper).
    * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **CompressX** (—Ä–∞–∑–¥–∞—á–∞ WebP/AVIF –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ PHP).
    * –ó–∞—â–∏—Ç–∞ –æ—Ç XMLRPC-–∞—Ç–∞–∫ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫—Ä—ã—Ç—ã–º —Ñ–∞–π–ª–∞–º.

* **Database:** MariaDB 11.
* **Object Cache:** Redis (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∏ –æ–±—ä–µ–∫—Ç–Ω–æ–≥–æ –∫—ç—à–∞ WP).
* **Management:** phpMyAdmin (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î).
* **Automation:** –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (`init-script.sh`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
    * –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞–±–æ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤ (Fluent CRM, Elementor, SEOPress –∏ –¥—Ä.).
    * –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `wp-config.php`.
    * –í–∫–ª—é—á–∞–µ—Ç Redis Object Cache.

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –∏ DNS (–í–∞–∂–Ω–æ!)

–ü–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º —Å—Ç–µ–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω –∏ –ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã Coolify —Å–º–æ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt) –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ VPS —Å–µ—Ä–≤–µ—Ä–∞ (–æ–Ω –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ `setup.sh` –∏–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞).

### 2. –°–æ–∑–¥–∞–Ω–∏–µ DNS-–∑–∞–ø–∏—Å–µ–π
–ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –¥–≤–µ **A-–∑–∞–ø–∏—Å–∏**:

| –¢–∏–ø –∑–∞–ø–∏—Å–∏ | –ò–º—è (Host) | –ó–Ω–∞—á–µ–Ω–∏–µ (Value) | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| **A** | `@` (–∏–ª–∏ –≤–∞—à–µ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è) | `–í–ê–®_IP_–°–ï–†–í–ï–†–ê` | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç WordPress |
| **A** | `db` (–∏–ª–∏ `pma`, `sql`) | `–í–ê–®_IP_–°–ï–†–í–ï–†–ê` | –î–æ—Å—Ç—É–ø –∫ phpMyAdmin |

> **‚òÅÔ∏è –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Cloudflare:**
> –ü—Ä–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –æ–±–ª–∞–∫–æ —Å –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ –Ω–∞ —Å–µ—Ä–æ–µ: **DNS Only**). –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –≤—ã–ø—É—Å–∫ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ.

### 3. –£–∫–∞–∑–∞–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤ –≤ Coolify
–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ Coolify –Ω–µ –∑–∞–±—É–¥—å—Ç–µ —É–∫–∞–∑–∞—Ç—å —ç—Ç–∏ –¥–æ–º–µ–Ω—ã:
* –î–ª—è —Å–µ—Ä–≤–∏—Å–∞ **wordpress**: –£–∫–∞–∂–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://example.com`).
* –î–ª—è —Å–µ—Ä–≤–∏—Å–∞ **phpmyadmin**: –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `phpmyadmin` –≤–Ω—É—Ç—Ä–∏ —Å—Ç–µ–∫–∞ –∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ–¥–¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://db.example.com`).

---

## üõ† –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (VPS)

–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π Coolify **–Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å "—á–∏—Å—Ç—ã–π" —Å–µ—Ä–≤–µ—Ä.
–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–æ–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, Swap –∏ Docker.

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –°–∫—Ä–∏–ø—Ç –æ—Ç–∫–ª—é—á–∏—Ç –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é! –î–æ—Å—Ç—É–ø –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ SSH-–∫–ª—é—á–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø–æ–∫–∞–∑–∞–Ω—ã –≤–∞–º –≤ –∫–æ–Ω—Ü–µ.

**–ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–æ—Ç root):**

```bash
bash <(curl -sL https://raw.githubusercontent.com/FluentBusiness/WP-FPM-Nginx-Redis-PMA-coolify/refs/heads/master/setup.sh)
```
### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç `setup.sh`:

* **System Update:** –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É—Ç–∏–ª–∏—Ç—ã (`curl`, `wget`, `git`, `htop`, `putty-tools`).
* **Swap 4GB:** –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –ø–æ–¥–∫–∞—á–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–º 4GB. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã MariaDB –∏ —Å–±–æ—Ä–∫–∏ Docker-–æ–±—Ä–∞–∑–æ–≤ –Ω–∞ VPS —Å –º–∞–ª—ã–º –æ–±—ä–µ–º–æ–º RAM.
* **SSH Keys:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∞—Ä—É –∫–ª—é—á–µ–π Ed25519. –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `authorized_keys`. –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ (OpenSSH –∏ PPK) –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å.
* **Firewall (UFW):** –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞, –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ, –∫—Ä–æ–º–µ –ø–æ—Ä—Ç–æ–≤ **22 (SSH), 80 (HTTP), 443 (HTTPS/UDP)**.
* **SSH Hardening:** –ó–∞–ø—Ä–µ—â–∞–µ—Ç –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é (`PasswordAuthentication no`), —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ root –ø–æ –∫–ª—é—á–∞–º.
* **Fail2Ban:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ (–±–∞–Ω IP –ø–æ—Å–ª–µ 3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ –ø–æ SSH).
* **Docker:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é Docker Engine.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ docker-compose.yaml    # –û—Å–Ω–æ–≤–Ω–æ–π –º–∞–Ω–∏—Ñ–µ—Å—Ç —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile             # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ WP (PHP 8.5 + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ nginx.conf             # –ö–æ–Ω—Ñ–∏–≥ Nginx (–ö—ç—à, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Å–∂–∞—Ç–∏–µ)
‚îú‚îÄ‚îÄ wp-php.ini             # –¢—é–Ω–∏–Ω–≥ PHP (Memory Limit 512M, Uploads 256M, JIT)
‚îú‚îÄ‚îÄ init-script.sh         # –ê–≤—Ç–æ-—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ WP –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
‚îú‚îÄ‚îÄ setup.sh               # –°–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ "—á–∏—Å—Ç–æ–≥–æ" VPS
‚îî‚îÄ‚îÄ .env                   # (–°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Coolify)

```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Coolify

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

1. –í Coolify —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å —Ç–∏–ø–∞ **Docker Compose**.
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `docker-compose.yaml` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Environment Variables)

Coolify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –º–Ω–æ–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ "Environment Variables" –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é / –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- |
| `SERVICE_FQDN_WORDPRESS` | URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ | `https://example.com` |
| `SERVICE_USER_WORDPRESS` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | `wordpress` |
| `SERVICE_PASSWORD_WORDPRESS` | –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î | *(–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è Coolify)* |
| `SERVICE_PASSWORD_ROOT` | Root –ø–∞—Ä–æ–ª—å –ë–î | *(–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è Coolify)* |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í `init-script.sh` –µ—Å—Ç—å –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –ø–æ–¥ –∫–ª—é—á–∏ S3 (Fluent Cloud Storage). –ï—Å–ª–∏ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ ENV (–Ω–∞–ø—Ä–∏–º–µ—Ä, `FLUENT_BOARDS_CLOUD_STORAGE_ACCESS_KEY`) –∏ –ø—Ä–æ–±—Ä–æ—Å—å—Ç–µ –∏—Ö –≤ `docker-compose.yaml`.

### 3. –¢–æ–º–∞ (Volumes) –∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **Git-–∏—Å—Ç–æ—á–Ω–∏–∫** –≤ Coolify, —Ñ–∞–π–ª—ã –ø–æ–¥—Ç—è–Ω—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **Simple Docker Compose** (–≤—Å—Ç–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞), –≤–∞–º –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ —Ä–∞–∑–¥–µ–ª–µ **Storages / Configs** –∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

1. **nginx.conf** ‚ûù Mount path: `/etc/nginx/conf.d/default.conf` (Service: `nginx`)
2. **wp-php.ini** ‚ûù Mount path: `/usr/local/etc/php/conf.d/wp-php.ini` (Service: `wordpress`)
3. **init-script.sh** ‚ûù Mount path: `/usr/local/bin/init-script.sh` (Service: `wordpress`)

### 4. –ó–∞–ø—É—Å–∫

–ù–∞–∂–º–∏—Ç–µ **Deploy**.

1. –°–æ–±–µ—Ä–µ—Ç—Å—è –æ–±—Ä–∞–∑ WordPress (–∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π PHP –∑–∞–π–º–µ—Ç 2-4 –º–∏–Ω—É—Ç—ã).
2. –ó–∞–ø—É—Å—Ç—è—Ç—Å—è MariaDB –∏ Redis.
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `wordpress` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç `init-script.sh` –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç —Å–∏—Å—Ç–µ–º—É.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. Nginx FastCGI Cache

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `nginx.conf`.

* **–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –∫—ç—à–∞:**
* –ú–µ—Ç–æ–¥ `POST`.
* URL —Å query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
* –ù–∞–ª–∏—á–∏–µ cookies: `wordpress_logged_in`, `woocommerce_items_in_cart` –∏ —Ç.–¥.
* –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ URL: `/wp-admin/`, `/xmlrpc.php`, `/wp-json/`.


* **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞:**
* –ü–∞–ø–∫–∞ –∫—ç—à–∞: `./nginx-cache`.
* –ü–ª–∞–≥–∏–Ω **Nginx Helper** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–µ—Ç–æ–¥ –æ—á–∏—Å—Ç–∫–∏ "Delete local files".



### 2. PHP Optimization (`wp-php.ini`)

* **Memory Limit:** 512M (–¥–ª—è —Ä–∞–±–æ—Ç—ã Elementor –∏ —Ç—è–∂–µ–ª—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤).
* **Opcache:** `opcache.validate_timestamps=1` –∏ `revalidate_freq=2` (–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É dev-—Ä–µ–∂–∏–º–æ–º –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é).
* **JIT:** –í–∫–ª—é—á–µ–Ω –≤ —Ä–µ–∂–∏–º–µ `1255` —Å –±—É—Ñ–µ—Ä–æ–º 100M –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

### 3. –ê–≤—Ç–æ-—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ (`init-script.sh`)

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –Ω–∞–±–æ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤.

#### üöÄ –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ Fluent (–ë–∏–∑–Ω–µ—Å-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)

* **Fluent CRM**, **Fluent Forms**, **Fluent Support**, **Fluent Boards**, **Fluent Community**, **Fluent Booking**, **Fluent SMTP**, **Fluent Snippets**, **Fluent Affiliate**, **Fluent Cart**, **Fluent Security**.

#### üé® –î–∏–∑–∞–π–Ω –∏ –ö–æ–Ω—Ç–µ–Ω—Ç

* **Elementor** + **Essential Addons**, **Templately**, **Essential Blocks**, **BetterDocs**.

#### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

* **Redis Object Cache** ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Redis.
* **Nginx Helper** ‚Äî –ê–≤—Ç–æ-–æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Nginx.
* **CompressX** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è WebP/AVIF.

#### üõ† –£—Ç–∏–ª–∏—Ç—ã –∏ SEO

* **SEOPress**, **WPvivid Backup**, **Cyr-to-Lat**, **Loco Translate**, **Really Simple SSL**, **Paymattic**, **Aimogen**.

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–°–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã:** Nginx –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ `.git`, `.env`, `.ini`, `.log`.
2. **–ó–∞–ø—Ä–µ—Ç PHP –≤ Uploads:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ `/wp-content/uploads` –∑–∞–ø—Ä–µ—â–µ–Ω–æ.
3. **XML-RPC:** –î–æ—Å—Ç—É–ø –∫ `xmlrpc.php` –∑–∞–∫—Ä—ã—Ç.
4. **SSH Hardening:** (`setup.sh`) –û—Ç–∫–ª—é—á–µ–Ω –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Fail2Ban, –Ω–∞—Å—Ç—Ä–æ–µ–Ω UFW.

---

## ‚ùì Troubleshooting

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∫—ç—à Nginx?**
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools -> Network. –ò—â–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-FastCGI-Cache`. –ó–Ω–∞—á–µ–Ω–∏—è: `HIT` (–∫—ç—à), `MISS` (–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å), `BYPASS` (–∫—ç—à –ø—Ä–æ–ø—É—â–µ–Ω).

**–ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"?**
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å `init-script.sh`:

```bash
docker exec -it <container_id> rm /var/www/html/.setup_done
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```

**–î–æ—Å—Ç—É–ø –∫ phpMyAdmin**
–î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É `8070` –∏–ª–∏ –ø–æ –ø–æ–¥–¥–æ–º–µ–Ω—É, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –≤ Coolify.

* **Server:** `mariadb`
* **User:** `root`
* **Password:** (–°–º. ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `$SERVICE_PASSWORD_ROOT`)

```

```